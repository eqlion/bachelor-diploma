\ProvidesPackage{local-minted}[2014/04/27 Local minted options]

\ifdefined\NoMinted
\else
\usepackage{minted}

% Сюда вставлять общие опции
\newcommand{\mintedoptions}{
  linenos,
  frame=single,
  fontsize=\footnotesize,
  style=bw,
  fontfamily=cyrillicfontttnoftr,
  breaklines
}

% Сюда пихать новые языки
\newcommand{\makenewmintedenviromnents}[1]{%
  \newminted{kotlin}{#1}%
  \newminted{java}{#1}%
  \newminted{yaml}{#1}%
  \newminted{xml}{#1}%
  \newminted{http}{#1}%
  \newminted{php}{#1}%
  \newmintedfile{java}{#1}%
  \newmintedfile{kotlin}{#1}%
  \newmintedfile{yaml}{#1}%
  \newmintedfile{xml}{#1}%
  \newmintedfile{http}{#1}%
  \newmintedfile{php}{#1}%
}

% Магия! Здесь происходит непосредственное определение всех окружений
\expandafter\makenewmintedenviromnents\expandafter{\mintedoptions}

\renewcommand{\listingscaption}{Листинг}
\renewcommand{\listoflistingscaption}{Листинги}

% Нумерация листингов внутри глав
\renewcommand*{\thelisting}{\thechapter.\arabic{listing}}
\@addtoreset{listing}{chapter}

\fi
\endinput
